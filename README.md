# Bangumi 搜索插件使用指南

## v1.1新增

### 角色模糊搜索
`/bgm角色搜索 关键词`

- 通过名称模糊匹配条目
- 示例：`/bgm角色搜索 鹿岛理理` 

### 角色精准搜索
`/bgm角色 ID`

- 通过ID准确匹配条目
- 示例：`/bgm角色 36904` 

### 人物模糊搜索
`/bgm人物搜索 关键词`

- 通过名称模糊匹配条目
- 示例：`/bgm人物搜索 片冈智` 

### 人物精准搜索
`/bgm人物 ID`

- 通过ID准确匹配条目
- 示例：`/bgm人物 5756` 

### 用户搜索
`/bgm用户 ID`

- 通过用户名准确匹配用户
- 示例：`/bgm用户 aurora5454` 

## 📌 基本命令

### 精确搜索
`/bgm搜索 关键词或ID`

- 通过名称或ID精确匹配条目
- 显示完整信息（评分/简介/封面等）
- 示例：`/bgm搜索 进击的巨人` 或 `/bgm搜索 123456`

### 模糊搜索
`/bgm模糊 关键词`

- 显示自定义数量的相关结果
- 快速查找不确定名称的条目
- 示例：`/bgm模糊 命运`

### access_token获取

注册bangumi账号，点击[个人令牌](https://next.bgm.tv/demo/access-token/create)，创建token

## 🛠️ 配置参数

| 参数名 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| access_token | string | 无 | Bangumi API密钥（必填） |
| max_fuzzy_results | int | 5 | 模糊搜索最大结果数 |
| use_forward | bool | false | 是否使用转发消息样式 |
| if_fromfilesystem | bool | false | 是否从本地加载图片 |

## 🌟 功能特点

✅ **多维度信息展示**
- 中文/原名对照
- 类型图标自动匹配（📚/🎬/🎵）
- 豆瓣式评分展示（⭐ 8.7）

✅ **智能缓存机制**
- 搜索结果缓存5分钟
- 自动请求频率控制（1.1秒/次）

✅ **多重容错处理**
- 图片加载失败自动降级
- API限流自动提醒
- 网络异常自动重试

## 💡 使用技巧

1. **ID精确查询**  
   在Bangumi官网找到条目ID后使用：  
   `/bgm搜索 123456`

2. **日文原名搜索**  
   部分动画用日文名更准确：  
   `/bgm搜索 進撃の巨人`

3. **类型筛选**  
   在结果中查看类型标识：  
   🎬=动画 📚=书籍 🎮=游戏

## ⚠️ 注意事项

1. 每日API调用上限为1000次
2. 图片显示需要配置正确的TEMP_DIR路径
3. 中文名可能因翻译不同有差异

## 🔄 更新日志

### v1.1 (2025-07-31)
- 新增图片缓存系统
- 优化错误提示文案
- 修复特殊字符搜索问题

> 遇到问题请提交Issue：  
> [GitHub仓库](https://github.com/Amatsutsumi/astrbot_plugin_bangumi)
